<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>App开发规范与建议 · Ai4ELab</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../democards/listtheme.css" rel="stylesheet" type="text/css"/><link href="../../assets/css/ai4e.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Ai4ELab logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Ai4ELab</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../quickstart/">Quick Start</a></li><li><a class="tocitem" href="../webdesign/">App设计教程</a></li><li class="is-active"><a class="tocitem" href>App开发规范与建议</a><ul class="internal"><li><a class="tocitem" href="#开发环境"><span>开发环境</span></a></li><li><a class="tocitem" href="#App文件结构"><span>App文件结构</span></a></li><li><a class="tocitem" href="#文件内容"><span>文件内容</span></a></li><li><a class="tocitem" href="#StippleUI与StipplePlotly"><span>StippleUI与StipplePlotly</span></a></li><li><a class="tocitem" href="#App介绍文档"><span>App介绍文档</span></a></li><li><a class="tocitem" href="#调试建议与感悟"><span>调试建议与感悟</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../../apps/">APP Show</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>App开发规范与建议</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>App开发规范与建议</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/ai4energy/Ai4ELab/blob/main/docs/src/tutorials/styleAndRules.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="App开发规范与建议"><a class="docs-heading-anchor" href="#App开发规范与建议">App开发规范与建议</a><a id="App开发规范与建议-1"></a><a class="docs-heading-anchor-permalink" href="#App开发规范与建议" title="Permalink"></a></h1><h2 id="开发环境"><a class="docs-heading-anchor" href="#开发环境">开发环境</a><a id="开发环境-1"></a><a class="docs-heading-anchor-permalink" href="#开发环境" title="Permalink"></a></h2><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p>开发环境可以建立在<code>tests/</code>或其他文件夹中。尝试<code>labs/</code>中例子也不要对里面的项目直接修改。最好把它复制出来，<code>tests/</code>或其他文件夹中。规避无法撤回的风险。</p></div></div><ul><li>建立Julia环境的方法是创建<code>Project.toml</code>文件</li><li>把Julia环境切换到当前文件夹，即</li></ul><pre><code class="language-julia hljs">TestLab&gt; julia #进入Julia
julia&gt; #按下 ] 键进入包模式
(@v1.x) pkg&gt; activate .</code></pre><p><strong>或者按照<a href="../quickstart/#方法2">Quick Start中的方法2</a>，直接通过VScode运行也可以。</strong></p><ul><li>若要添加依赖包，使用<code>add</code>，那么在<code>Project.toml</code>文件中自动生成<code>[deps]</code>。所以这个文件中的<code>[deps]</code>，不用自己写。</li><li>按下面的方式使用<code>instantiate</code>，<code>instantiate</code>实际上就是根据<code>Project.toml</code>的内容把相应的包拉取到当前环境。<code>Manifest.toml</code>是在实例化环境时生成的。<a href="../quickstart/#方法2">Quick Start中的方法2</a>把上述过程写在了Julia脚本中，自动完成。</li></ul><pre><code class="language-julia hljs">(TestLab) pkg&gt; instantiate</code></pre><p>需要自己写的是<code>[compat]</code>，这是<strong>兼容</strong>的意思。就是说明你的环境用的包版本是多少，为了避免因为包版本更新而产生错误。在包模式下输入<code>status</code>可以查看包版本。在本地App设计调试完成以后，把版本兼容手动写上去即可。</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>更多信息可以查看<a href="https://pkgdocs.julialang.org/v1/compatibility/">Pkg.jl</a></p></div></div><h2 id="App文件结构"><a class="docs-heading-anchor" href="#App文件结构">App文件结构</a><a id="App文件结构-1"></a><a class="docs-heading-anchor-permalink" href="#App文件结构" title="Permalink"></a></h2><p>文件结构做如下统一：</p><pre><code class="language-powershell hljs">XXX/
TestLab/
├── lib/
│   └── MyApp.jl
├── public/
│   └── favicon.ico
├── Dockerfile
├── Project.toml
└── run.jl</code></pre><p>XXX为项目文件名，如<code>TestLab</code>与<code>HeatLab</code>。</p><p>这样的结构能够通过Docker直接部署。</p><h2 id="文件内容"><a class="docs-heading-anchor" href="#文件内容">文件内容</a><a id="文件内容-1"></a><a class="docs-heading-anchor-permalink" href="#文件内容" title="Permalink"></a></h2><p>这部分主要看各位的理解程度，如果把Stipple实属玩明白了，随意发挥。</p><p>如果不太明白，仅修改部分内容也能够很好地实现App。</p><h3 id="快速上手版"><a class="docs-heading-anchor" href="#快速上手版">快速上手版</a><a id="快速上手版-1"></a><a class="docs-heading-anchor-permalink" href="#快速上手版" title="Permalink"></a></h3><p><strong>仅修改</strong><code>lib/MyApp.jl</code>中函数<code>ui</code>与结构体<code>MyPage</code><strong>里面</strong>的内容，这二者名字也不改动。</p><p>其他计算函数如<code>compute_data</code>、<code>pd</code>等按需修改。</p><h3 id="高端精通版"><a class="docs-heading-anchor" href="#高端精通版">高端精通版</a><a id="高端精通版-1"></a><a class="docs-heading-anchor-permalink" href="#高端精通版" title="Permalink"></a></h3><p>唯一的要求：能用Docker部署。🤣🤣🤣</p><div class="admonition is-warning"><header class="admonition-header">Warning</header><div class="admonition-body"><p><code>MyApp.jl</code>中使用了<code>MyApp</code>模块中的<code>MyPage</code>结构体与<code>ui</code>函数。模块化封装的作用是为了可以重定义<code>MyPage</code>。这是为了适配<code>Revise.jl</code>，目的就是为了实时同步代码更新。即网页运行时，直接修改代码，浏览器刷新一下就能看到代码刷新后页面的效果。但是如果修改了<code>MyPage</code>结构体，这个时候大概率还是得先<code>down()</code>再重新启动一下，这和页面渲染有关。如果碰到了问题，解决不了。就用那个经典的方法——重开Julia。🤣🤣🤣</p><p><code>run.jl</code>，<code>MyApp.jl</code>中的内容相关联，如果改动了<code>MyApp.jl</code>中的模块名和结构体名，需要做对应的关联，否则报错。</p></div></div><h2 id="StippleUI与StipplePlotly"><a class="docs-heading-anchor" href="#StippleUI与StipplePlotly">StippleUI与StipplePlotly</a><a id="StippleUI与StipplePlotly-1"></a><a class="docs-heading-anchor-permalink" href="#StippleUI与StipplePlotly" title="Permalink"></a></h2><p>这两个相关的内容是需要查阅文档的。</p><p>关于StippleUI。在例子里只用了滑杆(slider)与选择框(select)，还有很多有意思的UI组件在文档API中。大家可以自行查看。</p><p>关于StipplePlotly。画图时，支持各种图。Web画图主要是用PlotlyJS，StipplePlotly作为中间层，最终会把前面提到的<code>PlotData</code>的内容生成对应的CSS与JS文件。那么可以说，最终的目的是画PlotlyJS的图。所以有些API需要去<a href="https://plotly.com/julia/">PlotlyJS的官方文档</a>找，例如HeatLab中<code>PlotData</code>里的</p><pre><code class="language-julia hljs">contours=Dict(&quot;start&quot; =&gt; 0, &quot;end&quot; =&gt; 1000)</code></pre><p>只有看官方文档才能写出来的。记住：<code>PlotData</code>是中间层，用来储存信息。<code>PlotlyJS</code>是最终目的。</p><h2 id="App介绍文档"><a class="docs-heading-anchor" href="#App介绍文档">App介绍文档</a><a id="App介绍文档-1"></a><a class="docs-heading-anchor-permalink" href="#App介绍文档" title="Permalink"></a></h2><p>Ai4ELab的文件结构为：</p><pre><code class="language-powershell hljs">Ai4ELab/
├── docs/
│   ├── src/
│   │   ├──labs/
│   │   │  ├──HeatLab.md
│   │   │  └──...
│   │   └── ...
│   └── ...
├── labs/
│   └── ...
├── .github
├── .gitignore
├── LICENSE
└── README.md</code></pre><ul><li>在<code>Ai4ELab/labs</code>中建立App代码文件夹</li><li>在<code>Ai4ELab/docs/src/labs</code>中建立自己的App介绍文档。文档模板参考<code>TestLab</code>与<code>HeatLab</code>。<strong>把模板中的几大要点确定了，基本上App的框架设计也就完成了。</strong></li></ul><h2 id="调试建议与感悟"><a class="docs-heading-anchor" href="#调试建议与感悟">调试建议与感悟</a><a id="调试建议与感悟-1"></a><a class="docs-heading-anchor-permalink" href="#调试建议与感悟" title="Permalink"></a></h2><p>不会不要紧，若有解决问题的信心，没有解决不了的问题。</p><p>实践之路这样的：</p><ol><li>对照着页面看看代码</li><li>有些理解了，根据理解做一些改动代码改动</li><li>看看改动和效果和预期是否一致</li><li>重复1-3，然后——小悟了！</li><li>想象你期望的实现</li><li>重复1-3，探索实现的方法</li><li>在想象与现实之间多次挣扎，在Bug和撤回之间反复横跳</li><li>在1-3的路上继续坚持，然后——大悟了！</li></ol><p>实践理论再实践的马克思哲学原理不就用上了吗？👍</p><p>个人感悟，想清楚了这几个问题，就悟了：</p><ol><li>这一行代码（一段代码、一个函数、一个文件）完成了什么任务</li><li>为什么要这么写，有没有什么道理（可能有也可能没有，如果能判断它为无关紧要的部分，那理解认识也就到位了）</li><li>为什么他的可以跑，我的不行</li><li>根据现有的机制，我想要实现我的想法的路径是什么</li></ol><p>至此，App的教程到此就告一段落了。这些感悟与认识也是在写<code>TestPage</code>与<code>HeatLab</code>实践中得来的。在App设计与实践中依然会有很多没有遇到过的困难，这是必然的。站在巨人的肩膀上，再向前探索，解决一个又一个问题，也是一种乐趣。想象、实践到实现的创造过程，是人类特有的高级趣味，希望大家在实践中都能够有所体会。</p><p>此外，成为开发者很难吗？不难。</p><p>HeatLab已经并入了Stipple的高级示例库（AdvanceExample）。所以大家都能成为开发者。</p><p><img src="../../assets/styleAndRules-17-59.png" alt="图 1"/>  </p><p>日拱一卒，期望在Ai4ELab与StippleDemos看到大家的Pull Request。</p><p><strong>Whether amazing work or not, thanks for your contribution! Just do it!</strong></p><div class="admonition is-success"><header class="admonition-header">Tip</header><div class="admonition-body"><p>有部署需要（汇报、展示、答辩等等）的同学，提前告知。App可以直接部署在组里的云服务器上。👍👍</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../webdesign/">« App设计教程</a><a class="docs-footer-nextpage" href="../../apps/">APP Show »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.23 on <span class="colophon-date" title="Monday 26 September 2022 01:40">Monday 26 September 2022</span>. Using Julia version 1.8.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
